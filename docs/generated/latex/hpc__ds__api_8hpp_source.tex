\hypertarget{hpc__ds__api_8hpp_source}{}\doxysection{hpc\+\_\+ds\+\_\+api.\+hpp}
\label{hpc__ds__api_8hpp_source}\index{/home/somik/CBIA/hpc-\/datastore-\/cpp/src/hpc\_ds\_api.hpp@{/home/somik/CBIA/hpc-\/datastore-\/cpp/src/hpc\_ds\_api.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include "{}hpc\_ds\_details.hpp"{}}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include "{}hpc\_ds\_structs.hpp"{}}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <fmt/core.h>}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <i3d/image3d.h>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <i3d/transform.h>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <type\_traits>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{keyword}{namespace }ds \{}
\DoxyCodeLine{25 \textcolor{keyword}{inline} dataset\_props\_ptr get\_dataset\_properties(\textcolor{keyword}{const} std::string\& ip,}
\DoxyCodeLine{26                                                 \textcolor{keywordtype}{int} port,}
\DoxyCodeLine{27                                                 \textcolor{keyword}{const} std::string\& uuid);}
\DoxyCodeLine{28 }
\DoxyCodeLine{51 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{52 i3d::Image3d<T> read\_image(\textcolor{keyword}{const} std::string\& ip,}
\DoxyCodeLine{53                            \textcolor{keywordtype}{int} port,}
\DoxyCodeLine{54                            \textcolor{keyword}{const} std::string\& uuid,}
\DoxyCodeLine{55                            \textcolor{keywordtype}{int} channel = 0,}
\DoxyCodeLine{56                            \textcolor{keywordtype}{int} timepoint = 0,}
\DoxyCodeLine{57                            \textcolor{keywordtype}{int} angle = 0,}
\DoxyCodeLine{58                            i3d::Vector3d<int> resolution = \{1, 1, 1\},}
\DoxyCodeLine{59                            \textcolor{keyword}{const} std::string\& version = \textcolor{stringliteral}{"{}latest"{}},}
\DoxyCodeLine{60                            dataset\_props\_ptr props = \textcolor{keyword}{nullptr});}
\DoxyCodeLine{61 }
\DoxyCodeLine{80 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{81 \textcolor{keywordtype}{void} write\_image(\textcolor{keyword}{const} i3d::Image3d<T>\& img,}
\DoxyCodeLine{82                  \textcolor{keyword}{const} std::string\& ip,}
\DoxyCodeLine{83                  \textcolor{keywordtype}{int} port,}
\DoxyCodeLine{84                  \textcolor{keyword}{const} std::string\& uuid,}
\DoxyCodeLine{85                  \textcolor{keywordtype}{int} channel = 0,}
\DoxyCodeLine{86                  \textcolor{keywordtype}{int} timepoint = 0,}
\DoxyCodeLine{87                  \textcolor{keywordtype}{int} angle = 0,}
\DoxyCodeLine{88                  i3d::Vector3d<int> resolution = \{1, 1, 1\},}
\DoxyCodeLine{89                  \textcolor{keyword}{const} std::string version = \textcolor{stringliteral}{"{}latest"{}},}
\DoxyCodeLine{90                  dataset\_props\_ptr props = \textcolor{keyword}{nullptr});}
\DoxyCodeLine{91 }
\DoxyCodeLine{113 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{114 \textcolor{keywordtype}{void} write\_with\_pyramids(\textcolor{keyword}{const} i3d::Image3d<T>\& img,}
\DoxyCodeLine{115                          \textcolor{keyword}{const} std::string\& ip,}
\DoxyCodeLine{116                          \textcolor{keywordtype}{int} port,}
\DoxyCodeLine{117                          \textcolor{keyword}{const} std::string\& uuid,}
\DoxyCodeLine{118                          \textcolor{keywordtype}{int} channel = 0,}
\DoxyCodeLine{119                          \textcolor{keywordtype}{int} timepoint = 0,}
\DoxyCodeLine{120                          \textcolor{keywordtype}{int} angle = 0,}
\DoxyCodeLine{121                          \textcolor{keyword}{const} std::string\& version = \textcolor{stringliteral}{"{}latest"{}},}
\DoxyCodeLine{122                          SamplingMode m = SamplingMode::NEAREST\_NEIGHBOUR,}
\DoxyCodeLine{123                          dataset\_props\_ptr props = \textcolor{keyword}{nullptr});}
\DoxyCodeLine{124 }
\DoxyCodeLine{134 \textcolor{keyword}{class }\mbox{\hyperlink{classds_1_1_image_view}{ImageView}} \{}
\DoxyCodeLine{135   \textcolor{keyword}{public}:}
\DoxyCodeLine{151     \mbox{\hyperlink{classds_1_1_image_view_a6bc9a78e3e37407d25906265b5976f49}{ImageView}}(std::string ip,}
\DoxyCodeLine{152               \textcolor{keywordtype}{int} port,}
\DoxyCodeLine{153               std::string uuid,}
\DoxyCodeLine{154               \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{155               \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{156               \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{157               i3d::Vector3d<int> resolution,}
\DoxyCodeLine{158               std::string version);}
\DoxyCodeLine{159 }
\DoxyCodeLine{165     dataset\_props\_ptr \mbox{\hyperlink{classds_1_1_image_view_ac7790f0d2cdb03a84c8d15fd50f42eb3}{get\_properties}}() \textcolor{keyword}{const};}
\DoxyCodeLine{166 }
\DoxyCodeLine{184     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{185     i3d::Image3d<T> \mbox{\hyperlink{classds_1_1_image_view_a34b06917bdc27ad8747a1706b027b072}{read\_block}}(i3d::Vector3d<int> coord,}
\DoxyCodeLine{186                                dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{187 }
\DoxyCodeLine{205     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{206     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_a34b06917bdc27ad8747a1706b027b072}{read\_block}}(i3d::Vector3d<int> coord,}
\DoxyCodeLine{207                     i3d::Image3d<T>\& dest,}
\DoxyCodeLine{208                     i3d::Vector3d<int> dest\_offset = \{0, 0, 0\},}
\DoxyCodeLine{209                     dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{210 }
\DoxyCodeLine{237     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{238     std::vector<i3d::Image3d<T>>}
\DoxyCodeLine{239     \mbox{\hyperlink{classds_1_1_image_view_a69673262a53500d9c3224755cf5ec47a}{read\_blocks}}(\textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{240                 dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{241 }
\DoxyCodeLine{257     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{258     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_a69673262a53500d9c3224755cf5ec47a}{read\_blocks}}(\textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{259                      i3d::Image3d<T>\& dest,}
\DoxyCodeLine{260                      \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& offsets,}
\DoxyCodeLine{261                      dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{262 }
\DoxyCodeLine{275     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{276     i3d::Image3d<T> \mbox{\hyperlink{classds_1_1_image_view_affd6e7a10a37fc2b194dd50bb02a1bac}{read\_region}}(i3d::Vector3d<int> start\_point,}
\DoxyCodeLine{277                                 i3d::Vector3d<int> end\_point,}
\DoxyCodeLine{278                                 dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{279 }
\DoxyCodeLine{295     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{296     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_affd6e7a10a37fc2b194dd50bb02a1bac}{read\_region}}(i3d::Vector3d<int> start\_point,}
\DoxyCodeLine{297                      i3d::Vector3d<int> end\_point,}
\DoxyCodeLine{298                      i3d::Image3d<T>\& dest,}
\DoxyCodeLine{299                      i3d::Vector3d<int> offset = \{0, 0, 0\},}
\DoxyCodeLine{300                      dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{301 }
\DoxyCodeLine{315     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{316     i3d::Image3d<T> \mbox{\hyperlink{classds_1_1_image_view_a8da1f476d9998218321aa91ad1a2225f}{read\_image}}(dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{317 }
\DoxyCodeLine{334     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{335     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_a2492faa3dcc360410494b72dd01e40d3}{write\_block}}(\textcolor{keyword}{const} i3d::Image3d<T>\& src,}
\DoxyCodeLine{336                      i3d::Vector3d<int> coord,}
\DoxyCodeLine{337                      i3d::Vector3d<int> src\_offset = \{0, 0, 0\},}
\DoxyCodeLine{338                      dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{355     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{356     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_afe3c0e86330e84585f37c5cfbd748303}{write\_blocks}}(\textcolor{keyword}{const} i3d::Image3d<T>\& src,}
\DoxyCodeLine{357                       \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{358                       \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& src\_offsets,}
\DoxyCodeLine{359                       dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{360 }
\DoxyCodeLine{376     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{377     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_a45b52dc7c40dfdc79b8ae4ea8fe2ff4a}{write\_image}}(\textcolor{keyword}{const} i3d::Image3d<T>\& img,}
\DoxyCodeLine{378                      dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{379 }
\DoxyCodeLine{380   \textcolor{keyword}{private}:}
\DoxyCodeLine{381     std::string \_ip;}
\DoxyCodeLine{382     \textcolor{keywordtype}{int} \_port;}
\DoxyCodeLine{383     std::string \_uuid;}
\DoxyCodeLine{384     \textcolor{keywordtype}{int} \_channel;}
\DoxyCodeLine{385     \textcolor{keywordtype}{int} \_timepoint;}
\DoxyCodeLine{386     \textcolor{keywordtype}{int} \_angle;}
\DoxyCodeLine{387     i3d::Vector3d<int> \_resolution;}
\DoxyCodeLine{388     std::string \_version;}
\DoxyCodeLine{389 \};}
\DoxyCodeLine{390 }
\DoxyCodeLine{403 \textcolor{keyword}{class }\mbox{\hyperlink{classds_1_1_connection}{Connection}} \{}
\DoxyCodeLine{404   \textcolor{keyword}{public}:}
\DoxyCodeLine{413     \mbox{\hyperlink{classds_1_1_connection_a776a9ac914db1f7346c6f08a3bb936c3}{Connection}}(std::string ip, \textcolor{keywordtype}{int} port, std::string uuid);}
\DoxyCodeLine{414 }
\DoxyCodeLine{426     \mbox{\hyperlink{classds_1_1_image_view}{ImageView}} \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{get\_view}}(\textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{427                        \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{428                        \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{429                        i3d::Vector3d<int> resolution,}
\DoxyCodeLine{430                        \textcolor{keyword}{const} std::string\& version) \textcolor{keyword}{const};}
\DoxyCodeLine{431 }
\DoxyCodeLine{437     dataset\_props\_ptr \mbox{\hyperlink{classds_1_1_connection_a7fede50bfbc04ac0fba40598ac1b996e}{get\_properties}}() \textcolor{keyword}{const};}
\DoxyCodeLine{438 }
\DoxyCodeLine{460     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{461     i3d::Image3d<T> \mbox{\hyperlink{classds_1_1_connection_a2a8f4866ffa2ecd2f4e92b92397070a3}{read\_block}}(i3d::Vector3d<int> coord,}
\DoxyCodeLine{462                                \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{463                                \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{464                                \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{465                                i3d::Vector3d<int> resolution,}
\DoxyCodeLine{466                                \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{467                                dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{491     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{492     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_a2a8f4866ffa2ecd2f4e92b92397070a3}{read\_block}}(i3d::Vector3d<int> coord,}
\DoxyCodeLine{493                     i3d::Image3d<T>\& dest,}
\DoxyCodeLine{494                     i3d::Vector3d<int> dest\_offset,}
\DoxyCodeLine{495                     \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{496                     \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{497                     \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{498                     i3d::Vector3d<int> resolution,}
\DoxyCodeLine{499                     \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{500                     dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{501 }
\DoxyCodeLine{534     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{535     std::vector<i3d::Image3d<T>>}
\DoxyCodeLine{536     \mbox{\hyperlink{classds_1_1_connection_a8b58bc861fe1817b09bafaa2bd1e22f1}{read\_blocks}}(\textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{537                 \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{538                 \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{539                 \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{540                 i3d::Vector3d<int> resolution,}
\DoxyCodeLine{541                 \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{542                 dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{543 }
\DoxyCodeLine{567     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{568     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_a8b58bc861fe1817b09bafaa2bd1e22f1}{read\_blocks}}(\textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{569                      i3d::Image3d<T>\& dest,}
\DoxyCodeLine{570                      \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& dest\_offsets,}
\DoxyCodeLine{571                      \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{572                      \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{573                      \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{574                      i3d::Vector3d<int> resolution,}
\DoxyCodeLine{575                      \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{576                      dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{595     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{596     i3d::Image3d<T> \mbox{\hyperlink{classds_1_1_connection_af280841afc0dd6c7a10ec92eb328beee}{read\_region}}(i3d::Vector3d<int> start\_point,}
\DoxyCodeLine{597                                 i3d::Vector3d<int> end\_point,}
\DoxyCodeLine{598                                 \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{599                                 \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{600                                 \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{601                                 i3d::Vector3d<int> resolution,}
\DoxyCodeLine{602                                 \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{603                                 dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{604 }
\DoxyCodeLine{626     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{627     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_af280841afc0dd6c7a10ec92eb328beee}{read\_region}}(i3d::Vector3d<int> start\_point,}
\DoxyCodeLine{628                      i3d::Vector3d<int> end\_point,}
\DoxyCodeLine{629                      i3d::Image3d<T>\& dest,}
\DoxyCodeLine{630                      i3d::Vector3d<int> offset,}
\DoxyCodeLine{631                      \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{632                      \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{633                      \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{634                      i3d::Vector3d<int> resolution,}
\DoxyCodeLine{635                      \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{636                      dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{637 }
\DoxyCodeLine{657     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{658     i3d::Image3d<T> \mbox{\hyperlink{classds_1_1_connection_a5873115e051044eddefbe066a101c2f3}{read\_image}}(\textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{659                                \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{660                                \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{661                                i3d::Vector3d<int> resolution,}
\DoxyCodeLine{662                                \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{663                                dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{664 }
\DoxyCodeLine{687     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{688     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_ae0c769b98eca34fa1dfae54d9d5014f6}{write\_block}}(\textcolor{keyword}{const} i3d::Image3d<T>\& src,}
\DoxyCodeLine{689                      i3d::Vector3d<int> coord,}
\DoxyCodeLine{690                      i3d::Vector3d<int> src\_offset,}
\DoxyCodeLine{691                      \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{692                      \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{693                      \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{694                      i3d::Vector3d<int> resolution,}
\DoxyCodeLine{695                      \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{696                      dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{697 }
\DoxyCodeLine{720     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{721     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_a45c6930400c1c1b80cc54ba7680dc1d1}{write\_blocks}}(\textcolor{keyword}{const} i3d::Image3d<T>\& src,}
\DoxyCodeLine{722                       \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{723                       \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& src\_offsets,}
\DoxyCodeLine{724                       \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{725                       \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{726                       \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{727                       i3d::Vector3d<int> resolution,}
\DoxyCodeLine{728                       \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{729                       dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{730 }
\DoxyCodeLine{752     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{753     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_a7be146f24e215c529a8a066e5b4745e8}{write\_image}}(\textcolor{keyword}{const} i3d::Image3d<T>\& img,}
\DoxyCodeLine{754                      \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{755                      \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{756                      \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{757                      i3d::Vector3d<int> resolution,}
\DoxyCodeLine{758                      \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{759                      dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{760 }
\DoxyCodeLine{781     \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{782     \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_a908dc3d6ba765027770b21d7356c34eb}{write\_with\_pyramids}}(\textcolor{keyword}{const} i3d::Image3d<T>\& img,}
\DoxyCodeLine{783                              \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{784                              \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{785                              \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{786                              \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{787                              SamplingMode m,}
\DoxyCodeLine{788                              dataset\_props\_ptr props = \textcolor{keyword}{nullptr}) \textcolor{keyword}{const};}
\DoxyCodeLine{789 }
\DoxyCodeLine{790   \textcolor{keyword}{private}:}
\DoxyCodeLine{791     std::string \_ip;}
\DoxyCodeLine{792     \textcolor{keywordtype}{int} \_port;}
\DoxyCodeLine{793     std::string \_uuid;}
\DoxyCodeLine{794 \};}
\DoxyCodeLine{795 }
\DoxyCodeLine{796 \} \textcolor{comment}{// namespace ds}}
\DoxyCodeLine{797 }
\DoxyCodeLine{798 \textcolor{comment}{/* ================= IMPLEMENTATION FOLLOWS ======================== */}}
\DoxyCodeLine{799 }
\DoxyCodeLine{800 \textcolor{keyword}{namespace }ds \{}
\DoxyCodeLine{801 \textcolor{comment}{/* ===================================== Global space */}}
\DoxyCodeLine{802 \textcolor{comment}{/* inline */} dataset\_props\_ptr get\_dataset\_properties(\textcolor{keyword}{const} std::string\& ip,}
\DoxyCodeLine{803                                                       \textcolor{keywordtype}{int} port,}
\DoxyCodeLine{804                                                       \textcolor{keyword}{const} std::string\& uuid) \{}
\DoxyCodeLine{805     std::string dataset\_url = details::get\_dataset\_url(ip, port, uuid);}
\DoxyCodeLine{806     \textcolor{keywordflow}{return} std::make\_shared<DatasetProperties>(}
\DoxyCodeLine{807         details::get\_dataset\_properties(dataset\_url));}
\DoxyCodeLine{808 \}}
\DoxyCodeLine{809 }
\DoxyCodeLine{810 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{811 i3d::Image3d<T> read\_image(\textcolor{keyword}{const} std::string\& ip,}
\DoxyCodeLine{812                            \textcolor{keywordtype}{int} port,}
\DoxyCodeLine{813                            \textcolor{keyword}{const} std::string\& uuid,}
\DoxyCodeLine{814                            \textcolor{keywordtype}{int} channel \textcolor{comment}{/* = 0 */},}
\DoxyCodeLine{815                            \textcolor{keywordtype}{int} timepoint \textcolor{comment}{/*  = 0 */},}
\DoxyCodeLine{816                            \textcolor{keywordtype}{int} angle \textcolor{comment}{/* = 0 */},}
\DoxyCodeLine{817                            i3d::Vector3d<int> resolution \textcolor{comment}{/* = \{1, 1, 1\} */},}
\DoxyCodeLine{818                            \textcolor{keyword}{const} std::string\& version \textcolor{comment}{/* = "{}latest"{} */},}
\DoxyCodeLine{819                            dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */}) \{}
\DoxyCodeLine{820     \textcolor{keywordflow}{return} ImageView(ip, port, uuid, channel, timepoint, angle, resolution,}
\DoxyCodeLine{821                      version)}
\DoxyCodeLine{822         .read\_image<T>(props);}
\DoxyCodeLine{823 \}}
\DoxyCodeLine{824 }
\DoxyCodeLine{825 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{826 \textcolor{keywordtype}{void} write\_image(\textcolor{keyword}{const} i3d::Image3d<T>\& img,}
\DoxyCodeLine{827                  \textcolor{keyword}{const} std::string\& ip,}
\DoxyCodeLine{828                  \textcolor{keywordtype}{int} port,}
\DoxyCodeLine{829                  \textcolor{keyword}{const} std::string\& uuid,}
\DoxyCodeLine{830                  \textcolor{keywordtype}{int} channel \textcolor{comment}{/* = 0 */},}
\DoxyCodeLine{831                  \textcolor{keywordtype}{int} timepoint \textcolor{comment}{/* = 0 */},}
\DoxyCodeLine{832                  \textcolor{keywordtype}{int} angle \textcolor{comment}{/* = 0 */},}
\DoxyCodeLine{833                  i3d::Vector3d<int> resolution \textcolor{comment}{/*  = \{1, 1, 1\} */},}
\DoxyCodeLine{834                  \textcolor{keyword}{const} std::string version \textcolor{comment}{/* = "{}latest"{} */},}
\DoxyCodeLine{835                  dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */}) \{}
\DoxyCodeLine{836     ImageView(ip, port, uuid, channel, timepoint, angle, resolution, version)}
\DoxyCodeLine{837         .write\_image(img, props);}
\DoxyCodeLine{838 \}}
\DoxyCodeLine{839 }
\DoxyCodeLine{840 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{841 \textcolor{keywordtype}{void} write\_with\_pyramids(\textcolor{keyword}{const} i3d::Image3d<T>\& img,}
\DoxyCodeLine{842                          \textcolor{keyword}{const} std::string\& ip,}
\DoxyCodeLine{843                          \textcolor{keywordtype}{int} port,}
\DoxyCodeLine{844                          \textcolor{keyword}{const} std::string\& uuid,}
\DoxyCodeLine{845                          \textcolor{keywordtype}{int} channel \textcolor{comment}{/* = 0 */},}
\DoxyCodeLine{846                          \textcolor{keywordtype}{int} timepoint \textcolor{comment}{/* = 0 */},}
\DoxyCodeLine{847                          \textcolor{keywordtype}{int} angle \textcolor{comment}{/* = 0 */},}
\DoxyCodeLine{848                          \textcolor{keyword}{const} std::string\& version \textcolor{comment}{/* = "{}latest"{}*/},}
\DoxyCodeLine{849                          SamplingMode m \textcolor{comment}{/* = SamplingMode::NEAREST\_NEIGHBOUR */},}
\DoxyCodeLine{850                          dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */}) \{}
\DoxyCodeLine{851     Connection(ip, port, uuid)}
\DoxyCodeLine{852         .write\_with\_pyramids(img, channel, timepoint, angle, version, m, props);}
\DoxyCodeLine{853 \}}
\DoxyCodeLine{854 }
\DoxyCodeLine{855 \textcolor{comment}{/* ===================================== ImageView */}}
\DoxyCodeLine{856 }
\DoxyCodeLine{857 \mbox{\hyperlink{classds_1_1_image_view_a6bc9a78e3e37407d25906265b5976f49}{ImageView::ImageView}}(std::string ip,}
\DoxyCodeLine{858                      \textcolor{keywordtype}{int} port,}
\DoxyCodeLine{859                      std::string uuid,}
\DoxyCodeLine{860                      \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{861                      \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{862                      \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{863                      i3d::Vector3d<int> resolution,}
\DoxyCodeLine{864                      std::string version)}
\DoxyCodeLine{865     : \_ip(std::move(ip)), \_port(port), \_uuid(std::move(uuid)),}
\DoxyCodeLine{866       \_channel(channel), \_timepoint(timepoint), \_angle(angle),}
\DoxyCodeLine{867       \_resolution(resolution), \_version(std::move(version)) \{\}}
\DoxyCodeLine{868 }
\DoxyCodeLine{869 dataset\_props\_ptr \mbox{\hyperlink{classds_1_1_image_view_ac7790f0d2cdb03a84c8d15fd50f42eb3}{ImageView::get\_properties}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{870     \textcolor{keywordflow}{return} get\_dataset\_properties(\_ip, \_port, \_uuid);}
\DoxyCodeLine{871 \}}
\DoxyCodeLine{872 }
\DoxyCodeLine{873 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{874 i3d::Image3d<T>}
\DoxyCodeLine{875 \mbox{\hyperlink{classds_1_1_image_view_a34b06917bdc27ad8747a1706b027b072}{ImageView::read\_block}}(i3d::Vector3d<int> coord,}
\DoxyCodeLine{876                       dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{877     \textcolor{comment}{/* Fetch properties from server */}}
\DoxyCodeLine{878     \textcolor{keywordflow}{if} (!props)}
\DoxyCodeLine{879         props = \mbox{\hyperlink{classds_1_1_image_view_ac7790f0d2cdb03a84c8d15fd50f42eb3}{get\_properties}}();}
\DoxyCodeLine{880 }
\DoxyCodeLine{881     i3d::Vector3d<int> block\_dim = props-\/>get\_block\_dimensions(\_resolution);}
\DoxyCodeLine{882 }
\DoxyCodeLine{883     \textcolor{comment}{/* Prepare output image */}}
\DoxyCodeLine{884     i3d::Image3d<T> img;}
\DoxyCodeLine{885     i3d::Vector3d<int> block\_size = details::data\_manip::get\_block\_size(}
\DoxyCodeLine{886         coord, block\_dim, props-\/>get\_img\_dimensions(\_resolution));}
\DoxyCodeLine{887     img.MakeRoom(block\_size);}
\DoxyCodeLine{888 }
\DoxyCodeLine{889     \textcolor{comment}{/* Fetch and return */}}
\DoxyCodeLine{890     \mbox{\hyperlink{classds_1_1_image_view_a34b06917bdc27ad8747a1706b027b072}{read\_block}}(coord, img);}
\DoxyCodeLine{891     \textcolor{keywordflow}{return} img;}
\DoxyCodeLine{892 \}}
\DoxyCodeLine{893 }
\DoxyCodeLine{894 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{895 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_a34b06917bdc27ad8747a1706b027b072}{ImageView::read\_block}}(i3d::Vector3d<int> coord,}
\DoxyCodeLine{896                            i3d::Image3d<T>\& dest,}
\DoxyCodeLine{897                            i3d::Vector3d<int> dest\_offset \textcolor{comment}{/*  = \{0, 0, 0\} */},}
\DoxyCodeLine{898                            dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{899     \mbox{\hyperlink{classds_1_1_image_view_a69673262a53500d9c3224755cf5ec47a}{read\_blocks}}(\{coord\}, dest, \{dest\_offset\}, props);}
\DoxyCodeLine{900 \}}
\DoxyCodeLine{901 }
\DoxyCodeLine{902 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{903 std::vector<i3d::Image3d<T>>}
\DoxyCodeLine{904 \mbox{\hyperlink{classds_1_1_image_view_a69673262a53500d9c3224755cf5ec47a}{ImageView::read\_blocks}}(\textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{905                        dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{906     \textcolor{keywordflow}{if} (!props)}
\DoxyCodeLine{907         props = \mbox{\hyperlink{classds_1_1_image_view_ac7790f0d2cdb03a84c8d15fd50f42eb3}{get\_properties}}();}
\DoxyCodeLine{908 }
\DoxyCodeLine{909     \textcolor{comment}{/* Process blocks one by one */}}
\DoxyCodeLine{910     std::vector<i3d::Image3d<T>> out;}
\DoxyCodeLine{911     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} coord : coords)}
\DoxyCodeLine{912         out.push\_back(read\_block<T>(coord));}
\DoxyCodeLine{913 }
\DoxyCodeLine{914     \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{915 \}}
\DoxyCodeLine{916 }
\DoxyCodeLine{917 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{918 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_a69673262a53500d9c3224755cf5ec47a}{ImageView::read\_blocks}}(\textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{919                             i3d::Image3d<T>\& dest,}
\DoxyCodeLine{920                             \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& offsets,}
\DoxyCodeLine{921                             dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */}}
\DoxyCodeLine{922 )\textcolor{keyword}{ const }\{}
\DoxyCodeLine{923 }
\DoxyCodeLine{924     \textcolor{keywordflow}{if} (!props)}
\DoxyCodeLine{925         props = \mbox{\hyperlink{classds_1_1_image_view_ac7790f0d2cdb03a84c8d15fd50f42eb3}{get\_properties}}();}
\DoxyCodeLine{926 }
\DoxyCodeLine{927     \textcolor{comment}{/* Fetched properties from server */}}
\DoxyCodeLine{928     std::string dataset\_url = details::get\_dataset\_url(\_ip, \_port, \_uuid);}
\DoxyCodeLine{929     i3d::Vector3d<int> block\_dim = props-\/>get\_block\_dimensions(\_resolution);}
\DoxyCodeLine{930 }
\DoxyCodeLine{931     i3d::Vector3d<int> img\_dim = props-\/>get\_img\_dimensions(\_resolution);}
\DoxyCodeLine{932 }
\DoxyCodeLine{933     \textcolor{keywordflow}{if} (coords.size() != offsets.size())}
\DoxyCodeLine{934         \textcolor{keywordflow}{throw} std::logic\_error(\textcolor{stringliteral}{"{}Count of coordinates != count of offsets"{}});}
\DoxyCodeLine{935 }
\DoxyCodeLine{936     \textcolor{keywordflow}{if} (!details::check\_block\_coords(coords, img\_dim, block\_dim))}
\DoxyCodeLine{937         \textcolor{keywordflow}{throw} std::out\_of\_range(\textcolor{stringliteral}{"{}Blocks out of range"{}});}
\DoxyCodeLine{938 }
\DoxyCodeLine{939     \textcolor{comment}{/* prepare request url */}}
\DoxyCodeLine{940     std::string session\_url = details::requests::session\_url\_request(}
\DoxyCodeLine{941         dataset\_url, \_resolution, \_version);}
\DoxyCodeLine{942 }
\DoxyCodeLine{943     \textcolor{keywordflow}{if} (session\_url.ends\_with(\textcolor{charliteral}{'/'}))}
\DoxyCodeLine{944         session\_url.pop\_back();}
\DoxyCodeLine{945 }
\DoxyCodeLine{946     std::vector<std::pair<std::string, std::vector<std::size\_t>>> requests =}
\DoxyCodeLine{947         details::create\_requests(coords, session\_url, \_timepoint, \_channel,}
\DoxyCodeLine{948                                  \_angle);}
\DoxyCodeLine{949 }
\DoxyCodeLine{950     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& [req, idxs] : requests) \{}
\DoxyCodeLine{951         \textcolor{keyword}{auto} [data, response] = details::requests::make\_request(req);}
\DoxyCodeLine{952 }
\DoxyCodeLine{953         std::size\_t start\_i = 0;}
\DoxyCodeLine{954         \textcolor{keywordflow}{for} (std::size\_t i : idxs) \{}
\DoxyCodeLine{955             std::size\_t data\_size = details::data\_manip::get\_block\_data\_size(}
\DoxyCodeLine{956                 props-\/>get\_block\_size(coords[i], \_resolution),}
\DoxyCodeLine{957                 props-\/>voxel\_type);}
\DoxyCodeLine{958 }
\DoxyCodeLine{959             details::data\_manip::read\_data(}
\DoxyCodeLine{960                 std::span(data.begin() + start\_i, data\_size), props-\/>voxel\_type,}
\DoxyCodeLine{961                 dest, offsets[i]);}
\DoxyCodeLine{962 }
\DoxyCodeLine{963             start\_i += data\_size;}
\DoxyCodeLine{964         \}}
\DoxyCodeLine{965     \}}
\DoxyCodeLine{966 \}}
\DoxyCodeLine{967 }
\DoxyCodeLine{968 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{969 i3d::Image3d<T>}
\DoxyCodeLine{970 \mbox{\hyperlink{classds_1_1_image_view_affd6e7a10a37fc2b194dd50bb02a1bac}{ImageView::read\_region}}(i3d::Vector3d<int> start\_point,}
\DoxyCodeLine{971                        i3d::Vector3d<int> end\_point,}
\DoxyCodeLine{972                        dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{973     \textcolor{keywordflow}{if} (!props)}
\DoxyCodeLine{974         props = \mbox{\hyperlink{classds_1_1_image_view_ac7790f0d2cdb03a84c8d15fd50f42eb3}{get\_properties}}();}
\DoxyCodeLine{975 }
\DoxyCodeLine{976     i3d::Vector3d img\_dim = props-\/>get\_img\_dimensions(\_resolution);}
\DoxyCodeLine{977     i3d::Vector3d block\_dim = props-\/>get\_block\_dimensions(\_resolution);}
\DoxyCodeLine{978 }
\DoxyCodeLine{979     std::vector<i3d::Vector3d<int>> coords = details::get\_intercepted\_blocks(}
\DoxyCodeLine{980         start\_point, end\_point, img\_dim, block\_dim);}
\DoxyCodeLine{981 }
\DoxyCodeLine{982     std::vector<i3d::Vector3d<int>> offsets;}
\DoxyCodeLine{983     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} coord : coords)}
\DoxyCodeLine{984         offsets.emplace\_back(coord * block\_dim -\/ start\_point);}
\DoxyCodeLine{985 }
\DoxyCodeLine{986     i3d::Image3d<T> out\_img;}
\DoxyCodeLine{987     out\_img.MakeRoom(end\_point -\/ start\_point);}
\DoxyCodeLine{988 }
\DoxyCodeLine{989     \mbox{\hyperlink{classds_1_1_image_view_a69673262a53500d9c3224755cf5ec47a}{read\_blocks}}(coords, out\_img, offsets, props);}
\DoxyCodeLine{990     \textcolor{keywordflow}{return} out\_img;}
\DoxyCodeLine{991 \}}
\DoxyCodeLine{992 }
\DoxyCodeLine{993 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{994 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_affd6e7a10a37fc2b194dd50bb02a1bac}{ImageView::read\_region}}(i3d::Vector3d<int> start\_point,}
\DoxyCodeLine{995                             i3d::Vector3d<int> end\_point,}
\DoxyCodeLine{996                             i3d::Image3d<T>\& dest,}
\DoxyCodeLine{997                             i3d::Vector3d<int> offset \textcolor{comment}{/* = \{0, 0, 0\} */},}
\DoxyCodeLine{998                             dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{999     \textcolor{keyword}{auto} temp\_img = read\_region<T>(start\_point, end\_point, props);}
\DoxyCodeLine{1000 }
\DoxyCodeLine{1001     \textcolor{comment}{// Copy to desired location}}
\DoxyCodeLine{1002     \textcolor{keywordflow}{for} (std::size\_t x = 0; x < temp\_img.GetSizeX(); ++x)}
\DoxyCodeLine{1003         \textcolor{keywordflow}{for} (std::size\_t y = 0; y < temp\_img.GetSizeY(); ++y)}
\DoxyCodeLine{1004             \textcolor{keywordflow}{for} (std::size\_t z = 0; z < temp\_img.GetSizeZ(); ++z)}
\DoxyCodeLine{1005                 dest.SetVoxel(x + offset.x, y + offset.y, z + offset.z,}
\DoxyCodeLine{1006                               temp\_img.GetVoxel(\{x, y, z\}));}
\DoxyCodeLine{1007 \}}
\DoxyCodeLine{1008 }
\DoxyCodeLine{1009 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1010 i3d::Image3d<T>}
\DoxyCodeLine{1011 \mbox{\hyperlink{classds_1_1_image_view_a8da1f476d9998218321aa91ad1a2225f}{ImageView::read\_image}}(dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1012     \textcolor{keywordflow}{if} (!props)}
\DoxyCodeLine{1013         props = \mbox{\hyperlink{classds_1_1_image_view_ac7790f0d2cdb03a84c8d15fd50f42eb3}{get\_properties}}();}
\DoxyCodeLine{1014 }
\DoxyCodeLine{1015     i3d::Vector3d img\_dim = props-\/>get\_img\_dimensions(\_resolution);}
\DoxyCodeLine{1016     \textcolor{keywordflow}{return} read\_region<T>(0, img\_dim, props);}
\DoxyCodeLine{1017 \}}
\DoxyCodeLine{1018 }
\DoxyCodeLine{1019 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1020 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_a2492faa3dcc360410494b72dd01e40d3}{ImageView::write\_block}}(\textcolor{keyword}{const} i3d::Image3d<T>\& src,}
\DoxyCodeLine{1021                             i3d::Vector3d<int> coord,}
\DoxyCodeLine{1022                             i3d::Vector3d<int> src\_offset \textcolor{comment}{/*  = \{0, 0, 0\} */},}
\DoxyCodeLine{1023                             dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1024     \mbox{\hyperlink{classds_1_1_image_view_afe3c0e86330e84585f37c5cfbd748303}{write\_blocks}}(src, \{coord\}, \{src\_offset\}, props);}
\DoxyCodeLine{1025 \}}
\DoxyCodeLine{1026 }
\DoxyCodeLine{1027 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1028 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_afe3c0e86330e84585f37c5cfbd748303}{ImageView::write\_blocks}}(\textcolor{keyword}{const} i3d::Image3d<T>\& src,}
\DoxyCodeLine{1029                              \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{1030                              \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& src\_offsets,}
\DoxyCodeLine{1031                              dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1032 }
\DoxyCodeLine{1033     \textcolor{keywordflow}{if} (!props)}
\DoxyCodeLine{1034         props = \mbox{\hyperlink{classds_1_1_image_view_ac7790f0d2cdb03a84c8d15fd50f42eb3}{get\_properties}}();}
\DoxyCodeLine{1035 }
\DoxyCodeLine{1036     \textcolor{comment}{/* Fetch server properties */}}
\DoxyCodeLine{1037     std::string dataset\_url = details::get\_dataset\_url(\_ip, \_port, \_uuid);}
\DoxyCodeLine{1038 }
\DoxyCodeLine{1039     i3d::Vector3d<int> block\_dim = props-\/>get\_block\_dimensions(\_resolution);}
\DoxyCodeLine{1040     i3d::Vector3d<int> img\_dim = props-\/>get\_img\_dimensions(\_resolution);}
\DoxyCodeLine{1041 }
\DoxyCodeLine{1042     \textcolor{comment}{/* Error checking (when not in debug, all checks automatically return}}
\DoxyCodeLine{1043 \textcolor{comment}{     * true)*/}}
\DoxyCodeLine{1044     \textcolor{keywordflow}{if} (coords.size() != src\_offsets.size())}
\DoxyCodeLine{1045         \textcolor{keywordflow}{throw} std::logic\_error(\textcolor{stringliteral}{"{}Count of coordinates != count of offsets"{}});}
\DoxyCodeLine{1046 }
\DoxyCodeLine{1047     \textcolor{keywordflow}{if} (!details::check\_block\_coords(coords, img\_dim, block\_dim))}
\DoxyCodeLine{1048         \textcolor{keywordflow}{throw} std::out\_of\_range(\textcolor{stringliteral}{"{}Blocks out of range"{}});}
\DoxyCodeLine{1049 }
\DoxyCodeLine{1050     \textcolor{comment}{/* prepare request url */}}
\DoxyCodeLine{1051     std::string session\_url = details::requests::session\_url\_request(}
\DoxyCodeLine{1052         dataset\_url, \_resolution, \_version);}
\DoxyCodeLine{1053 }
\DoxyCodeLine{1054     \textcolor{keywordflow}{if} (session\_url.ends\_with(\textcolor{charliteral}{'/'}))}
\DoxyCodeLine{1055         session\_url.pop\_back();}
\DoxyCodeLine{1056 }
\DoxyCodeLine{1057     std::vector<std::pair<std::string, std::vector<std::size\_t>>> requests =}
\DoxyCodeLine{1058         details::create\_requests(coords, session\_url, \_timepoint, \_channel,}
\DoxyCodeLine{1059                                  \_angle, 256);}
\DoxyCodeLine{1060 }
\DoxyCodeLine{1061     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& [req, idxs] : requests) \{}
\DoxyCodeLine{1062         std::size\_t full\_size = 0;}
\DoxyCodeLine{1063         \textcolor{keywordflow}{for} (std::size\_t i : idxs)}
\DoxyCodeLine{1064             full\_size += details::data\_manip::get\_block\_data\_size(}
\DoxyCodeLine{1065                 props-\/>get\_block\_size(coords[i], \_resolution),}
\DoxyCodeLine{1066                 props-\/>voxel\_type);}
\DoxyCodeLine{1067 }
\DoxyCodeLine{1068         \textcolor{comment}{/* Prepare vector representing octet-\/data (will be send to server) */}}
\DoxyCodeLine{1069         std::vector<char> data(full\_size);}
\DoxyCodeLine{1070 }
\DoxyCodeLine{1071         \textcolor{comment}{/* Transform image to octet-\/data */}}
\DoxyCodeLine{1072         std::size\_t start\_i = 0;}
\DoxyCodeLine{1073         \textcolor{keywordflow}{for} (std::size\_t i : idxs) \{}
\DoxyCodeLine{1074             i3d::Vector3d<int> block\_size =}
\DoxyCodeLine{1075                 props-\/>get\_block\_size(coords[i], \_resolution);}
\DoxyCodeLine{1076             std::size\_t data\_size = details::data\_manip::get\_block\_data\_size(}
\DoxyCodeLine{1077                 block\_size, props-\/>voxel\_type);}
\DoxyCodeLine{1078 }
\DoxyCodeLine{1079             details::data\_manip::write\_data(}
\DoxyCodeLine{1080                 src, src\_offsets[i],}
\DoxyCodeLine{1081                 std::span(data.begin() + start\_i, data\_size),}
\DoxyCodeLine{1082                 props-\/>voxel\_type, block\_size);}
\DoxyCodeLine{1083 }
\DoxyCodeLine{1084             start\_i += data\_size;}
\DoxyCodeLine{1085         \}}
\DoxyCodeLine{1086 }
\DoxyCodeLine{1087         \textcolor{keyword}{auto} [\_, response] = details::requests::make\_request(}
\DoxyCodeLine{1088             req, Poco::Net::HTTPRequest::HTTP\_POST, data,}
\DoxyCodeLine{1089             \{\{\textcolor{stringliteral}{"{}Content-\/Type"{}}, \textcolor{stringliteral}{"{}application/octet-\/stream"{}}\}\});}
\DoxyCodeLine{1090     \}}
\DoxyCodeLine{1091 \}}
\DoxyCodeLine{1092 }
\DoxyCodeLine{1093 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1094 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_image_view_a45b52dc7c40dfdc79b8ae4ea8fe2ff4a}{ImageView::write\_image}}(\textcolor{keyword}{const} i3d::Image3d<T>\& img,}
\DoxyCodeLine{1095                             dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1096 }
\DoxyCodeLine{1097     \textcolor{comment}{/* Fetch image properties from server */}}
\DoxyCodeLine{1098     \textcolor{keywordflow}{if} (!props)}
\DoxyCodeLine{1099         props = \mbox{\hyperlink{classds_1_1_image_view_ac7790f0d2cdb03a84c8d15fd50f42eb3}{get\_properties}}();}
\DoxyCodeLine{1100 }
\DoxyCodeLine{1101     i3d::Vector3d<int> block\_dim = props-\/>get\_block\_dimensions(\_resolution);}
\DoxyCodeLine{1102     i3d::Vector3d<int> img\_dim = props-\/>get\_img\_dimensions(\_resolution);}
\DoxyCodeLine{1103     i3d::Vector3d<int> block\_count =}
\DoxyCodeLine{1104         (img\_dim + block\_dim -\/ 1) / block\_dim; \textcolor{comment}{// Ceiling}}
\DoxyCodeLine{1105 }
\DoxyCodeLine{1106     \textcolor{comment}{/* Prepare coordinates of blocks and offsets to write whole image */}}
\DoxyCodeLine{1107     std::vector<i3d::Vector3d<int>> blocks;}
\DoxyCodeLine{1108     std::vector<i3d::Vector3d<int>> offsets;}
\DoxyCodeLine{1109 }
\DoxyCodeLine{1110     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < block\_count.x; ++x)}
\DoxyCodeLine{1111         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < block\_count.y; ++y)}
\DoxyCodeLine{1112             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} z = 0; z < block\_count.z; ++z) \{}
\DoxyCodeLine{1113                 blocks.emplace\_back(x, y, z);}
\DoxyCodeLine{1114                 offsets.emplace\_back(x * block\_dim.x, y * block\_dim.y,}
\DoxyCodeLine{1115                                      z * block\_dim.z);}
\DoxyCodeLine{1116             \}}
\DoxyCodeLine{1117 }
\DoxyCodeLine{1118     \textcolor{comment}{/* write whole image */}}
\DoxyCodeLine{1119     \mbox{\hyperlink{classds_1_1_image_view_afe3c0e86330e84585f37c5cfbd748303}{write\_blocks}}(img, blocks, offsets, props);}
\DoxyCodeLine{1120 \}}
\DoxyCodeLine{1121 }
\DoxyCodeLine{1122 \textcolor{comment}{/* ===================================== Connection */}}
\DoxyCodeLine{1123 }
\DoxyCodeLine{1124 \mbox{\hyperlink{classds_1_1_connection_a776a9ac914db1f7346c6f08a3bb936c3}{Connection::Connection}}(std::string ip, \textcolor{keywordtype}{int} port, std::string uuid)}
\DoxyCodeLine{1125     : \_ip(std::move(ip)), \_port(port), \_uuid(std::move(uuid)) \{\}}
\DoxyCodeLine{1126 }
\DoxyCodeLine{1127 \mbox{\hyperlink{classds_1_1_image_view}{ImageView}} \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{Connection::get\_view}}(\textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1128                                \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1129                                \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1130                                i3d::Vector3d<int> resolution,}
\DoxyCodeLine{1131                                \textcolor{keyword}{const} std::string\& version)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1132     \textcolor{keywordflow}{return} \mbox{\hyperlink{classds_1_1_image_view}{ImageView}}(\_ip, \_port, \_uuid, channel, timepoint, angle, resolution,}
\DoxyCodeLine{1133                      version);}
\DoxyCodeLine{1134 \}}
\DoxyCodeLine{1135 }
\DoxyCodeLine{1136 dataset\_props\_ptr \mbox{\hyperlink{classds_1_1_connection_a7fede50bfbc04ac0fba40598ac1b996e}{Connection::get\_properties}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1137     \textcolor{keywordflow}{return} get\_dataset\_properties(\_ip, \_port, \_uuid);}
\DoxyCodeLine{1138 \}}
\DoxyCodeLine{1139 }
\DoxyCodeLine{1140 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1141 i3d::Image3d<T>}
\DoxyCodeLine{1142 \mbox{\hyperlink{classds_1_1_connection_a2a8f4866ffa2ecd2f4e92b92397070a3}{Connection::read\_block}}(i3d::Vector3d<int> coord,}
\DoxyCodeLine{1143                        \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1144                        \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1145                        \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1146                        i3d::Vector3d<int> resolution,}
\DoxyCodeLine{1147                        \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{1148                        dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1149     \textcolor{keywordflow}{return} \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{get\_view}}(channel, timepoint, angle, resolution, version)}
\DoxyCodeLine{1150         .\mbox{\hyperlink{classds_1_1_image_view_a34b06917bdc27ad8747a1706b027b072}{read\_block}}<T>(coord, props);}
\DoxyCodeLine{1151 \}}
\DoxyCodeLine{1152 }
\DoxyCodeLine{1153 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1154 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_a2a8f4866ffa2ecd2f4e92b92397070a3}{Connection::read\_block}}(i3d::Vector3d<int> coord,}
\DoxyCodeLine{1155                             i3d::Image3d<T>\& dest,}
\DoxyCodeLine{1156                             i3d::Vector3d<int> dest\_offset,}
\DoxyCodeLine{1157                             \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1158                             \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1159                             \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1160                             i3d::Vector3d<int> resolution,}
\DoxyCodeLine{1161                             \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{1162                             dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1163     \textcolor{keywordflow}{return} \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{get\_view}}(channel, timepoint, angle, resolution, version)}
\DoxyCodeLine{1164         .\mbox{\hyperlink{classds_1_1_image_view_a34b06917bdc27ad8747a1706b027b072}{read\_block}}(coord, dest, dest\_offset, props);}
\DoxyCodeLine{1165 \}}
\DoxyCodeLine{1166 }
\DoxyCodeLine{1167 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1168 std::vector<i3d::Image3d<T>>}
\DoxyCodeLine{1169 \mbox{\hyperlink{classds_1_1_connection_a8b58bc861fe1817b09bafaa2bd1e22f1}{Connection::read\_blocks}}(\textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{1170                         \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1171                         \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1172                         \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1173                         i3d::Vector3d<int> resolution,}
\DoxyCodeLine{1174                         \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{1175                         dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1176     \textcolor{keywordflow}{return} \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{get\_view}}(channel, timepoint, angle, resolution, version)}
\DoxyCodeLine{1177         .\mbox{\hyperlink{classds_1_1_image_view_a69673262a53500d9c3224755cf5ec47a}{read\_blocks}}<T>(coords, props);}
\DoxyCodeLine{1178 \}}
\DoxyCodeLine{1179 }
\DoxyCodeLine{1180 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1181 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_a8b58bc861fe1817b09bafaa2bd1e22f1}{Connection::read\_blocks}}(}
\DoxyCodeLine{1182     \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{1183     i3d::Image3d<T>\& dest,}
\DoxyCodeLine{1184     \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& dest\_offsets,}
\DoxyCodeLine{1185     \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1186     \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1187     \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1188     i3d::Vector3d<int> resolution,}
\DoxyCodeLine{1189     \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{1190     dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1191     \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{get\_view}}(channel, timepoint, angle, resolution, version)}
\DoxyCodeLine{1192         .\mbox{\hyperlink{classds_1_1_image_view_a69673262a53500d9c3224755cf5ec47a}{read\_blocks}}(coords, dest, dest\_offsets, props);}
\DoxyCodeLine{1193 \}}
\DoxyCodeLine{1194 }
\DoxyCodeLine{1195 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1196 i3d::Image3d<T>}
\DoxyCodeLine{1197 \mbox{\hyperlink{classds_1_1_connection_af280841afc0dd6c7a10ec92eb328beee}{Connection::read\_region}}(i3d::Vector3d<int> start\_point,}
\DoxyCodeLine{1198                         i3d::Vector3d<int> end\_point,}
\DoxyCodeLine{1199                         \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1200                         \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1201                         \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1202                         i3d::Vector3d<int> resolution,}
\DoxyCodeLine{1203                         \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{1204                         dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1205     \textcolor{keywordflow}{return} \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{get\_view}}(channel, timepoint, angle, resolution, version)}
\DoxyCodeLine{1206         .\mbox{\hyperlink{classds_1_1_image_view_affd6e7a10a37fc2b194dd50bb02a1bac}{read\_region}}<T>(start\_point, end\_point, props);}
\DoxyCodeLine{1207 \}}
\DoxyCodeLine{1208 }
\DoxyCodeLine{1209 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1210 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_af280841afc0dd6c7a10ec92eb328beee}{Connection::read\_region}}(i3d::Vector3d<int> start\_point,}
\DoxyCodeLine{1211                              i3d::Vector3d<int> end\_point,}
\DoxyCodeLine{1212                              i3d::Image3d<T>\& dest,}
\DoxyCodeLine{1213                              i3d::Vector3d<int> offset,}
\DoxyCodeLine{1214                              \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1215                              \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1216                              \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1217                              i3d::Vector3d<int> resolution,}
\DoxyCodeLine{1218                              \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{1219                              dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1220     \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{get\_view}}(channel, timepoint, angle, resolution, version)}
\DoxyCodeLine{1221         .\mbox{\hyperlink{classds_1_1_image_view_affd6e7a10a37fc2b194dd50bb02a1bac}{read\_region}}<T>(start\_point, end\_point, dest, offset, props);}
\DoxyCodeLine{1222 \}}
\DoxyCodeLine{1223 }
\DoxyCodeLine{1224 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1225 i3d::Image3d<T>}
\DoxyCodeLine{1226 \mbox{\hyperlink{classds_1_1_connection_a5873115e051044eddefbe066a101c2f3}{Connection::read\_image}}(\textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1227                        \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1228                        \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1229                        i3d::Vector3d<int> resolution,}
\DoxyCodeLine{1230                        \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{1231                        dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1232     \textcolor{keywordflow}{return} \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{get\_view}}(channel, timepoint, angle, resolution, version)}
\DoxyCodeLine{1233         .\mbox{\hyperlink{classds_1_1_image_view_a8da1f476d9998218321aa91ad1a2225f}{read\_image}}<T>(props);}
\DoxyCodeLine{1234 \}}
\DoxyCodeLine{1235 }
\DoxyCodeLine{1236 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1237 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_ae0c769b98eca34fa1dfae54d9d5014f6}{Connection::write\_block}}(\textcolor{keyword}{const} i3d::Image3d<T>\& src,}
\DoxyCodeLine{1238                              i3d::Vector3d<int> coord,}
\DoxyCodeLine{1239                              i3d::Vector3d<int> src\_offset,}
\DoxyCodeLine{1240                              \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1241                              \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1242                              \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1243                              i3d::Vector3d<int> resolution,}
\DoxyCodeLine{1244                              \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{1245                              dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1246     \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{get\_view}}(channel, timepoint, angle, resolution, version)}
\DoxyCodeLine{1247         .\mbox{\hyperlink{classds_1_1_image_view_a2492faa3dcc360410494b72dd01e40d3}{write\_block}}(src, coord, src\_offset, props);}
\DoxyCodeLine{1248 \}}
\DoxyCodeLine{1249 }
\DoxyCodeLine{1250 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1251 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_a45c6930400c1c1b80cc54ba7680dc1d1}{Connection::write\_blocks}}(}
\DoxyCodeLine{1252     \textcolor{keyword}{const} i3d::Image3d<T>\& src,}
\DoxyCodeLine{1253     \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& coords,}
\DoxyCodeLine{1254     \textcolor{keyword}{const} std::vector<i3d::Vector3d<int>>\& src\_offsets,}
\DoxyCodeLine{1255     \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1256     \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1257     \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1258     i3d::Vector3d<int> resolution,}
\DoxyCodeLine{1259     \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{1260     dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1261     \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{get\_view}}(channel, timepoint, angle, resolution, version)}
\DoxyCodeLine{1262         .\mbox{\hyperlink{classds_1_1_image_view_afe3c0e86330e84585f37c5cfbd748303}{write\_blocks}}(src, coords, src\_offsets, props);}
\DoxyCodeLine{1263 \}}
\DoxyCodeLine{1264 }
\DoxyCodeLine{1265 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1266 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_a7be146f24e215c529a8a066e5b4745e8}{Connection::write\_image}}(\textcolor{keyword}{const} i3d::Image3d<T>\& img,}
\DoxyCodeLine{1267                              \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1268                              \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1269                              \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1270                              i3d::Vector3d<int> resolution,}
\DoxyCodeLine{1271                              \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{1272                              dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1273     \mbox{\hyperlink{classds_1_1_connection_a1c12652425561db13b9d624923585eb3}{get\_view}}(channel, timepoint, angle, resolution, version)}
\DoxyCodeLine{1274         .\mbox{\hyperlink{classds_1_1_image_view_a45b52dc7c40dfdc79b8ae4ea8fe2ff4a}{write\_image}}(img, props);}
\DoxyCodeLine{1275 \}}
\DoxyCodeLine{1276 }
\DoxyCodeLine{1277 \textcolor{keyword}{template} <cnpts::Scalar T>}
\DoxyCodeLine{1278 \textcolor{keywordtype}{void} \mbox{\hyperlink{classds_1_1_connection_a908dc3d6ba765027770b21d7356c34eb}{Connection::write\_with\_pyramids}}(}
\DoxyCodeLine{1279     \textcolor{keyword}{const} i3d::Image3d<T>\& img,}
\DoxyCodeLine{1280     \textcolor{keywordtype}{int} channel,}
\DoxyCodeLine{1281     \textcolor{keywordtype}{int} timepoint,}
\DoxyCodeLine{1282     \textcolor{keywordtype}{int} angle,}
\DoxyCodeLine{1283     \textcolor{keyword}{const} std::string\& version,}
\DoxyCodeLine{1284     SamplingMode m,}
\DoxyCodeLine{1285     dataset\_props\_ptr props \textcolor{comment}{/* = nullptr */})\textcolor{keyword}{ const }\{}
\DoxyCodeLine{1286     \textcolor{keywordflow}{if} (!props)}
\DoxyCodeLine{1287         props = \mbox{\hyperlink{classds_1_1_connection_a7fede50bfbc04ac0fba40598ac1b996e}{get\_properties}}();}
\DoxyCodeLine{1288     \mbox{\hyperlink{classds_1_1_connection_a7be146f24e215c529a8a066e5b4745e8}{write\_image}}(img, channel, timepoint, angle, \{1, 1, 1\}, version, props);}
\DoxyCodeLine{1289 }
\DoxyCodeLine{1290     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& res : props-\/>get\_all\_resolutions()) \{}
\DoxyCodeLine{1291         \textcolor{keywordflow}{if} (res == i3d::Vector3d<int>\{1, 1, 1\})}
\DoxyCodeLine{1292             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1293 }
\DoxyCodeLine{1294         i3d::Vector3d<int> new\_dim = props-\/>get\_img\_dimensions(res);}
\DoxyCodeLine{1295         i3d::Image3d<T> cpy;}
\DoxyCodeLine{1296         i3d::Resample(img, cpy, new\_dim, m);}
\DoxyCodeLine{1297         \mbox{\hyperlink{classds_1_1_connection_a7be146f24e215c529a8a066e5b4745e8}{write\_image}}(cpy, channel, timepoint, angle, res, version, props);}
\DoxyCodeLine{1298     \}}
\DoxyCodeLine{1299 \}}
\DoxyCodeLine{1300 }
\DoxyCodeLine{1301 \} \textcolor{comment}{// namespace ds}}

\end{DoxyCode}
